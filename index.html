
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>3D chair configurator with AR</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="style.css">

    <!-- The following libraries and polyfills are recommended to maximize browser support -->
    <!-- NOTE: you must adjust the paths as appropriate for your project -->

    <!-- 游뚿 REQUIRED: Web Components polyfill to support Edge and Firefox < 63 -->
<!--     <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.1.3/webcomponents-loader.js"></script> -->

    <!-- 游누 OPTIONAL: Intersection Observer polyfill for better performance in Safari and IE11 -->
<!--     <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script> -->

    <!-- 游누 OPTIONAL: Resize Observer polyfill improves resize behavior in non-Chrome browsers -->
<!--     <script src="https://unpkg.com/resize-observer-polyfill@1.5.0/dist/ResizeObserver.js"></script> -->

    <!-- 游누 OPTIONAL: The :focus-visible polyfill removes the focus ring for some input types -->
    <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>

  </head>
<body>
  <div id="card">
    <!-- All you need to put beautiful, interactive 3D content on your site: -->
    <model-viewer id="chair"
                  src="https://cdn.glitch.me/2203c150-8129-444f-89be-738f24eec6d4%2Fchair.glb?v=1636992047283"
                  ios-src="https://cdn.glitch.me/2203c150-8129-444f-89be-738f24eec6d4%2FOffice_Chair.usdz?v=1636991229612"
                  poster="https://cdn.glitch.com/86f43516-6172-4a58-b9a2-46c74478d5a7%2Fchair2.png?v=1625228915752"
                  alt="A Chair"
                  shadow-intensity="1.5"
                  environment-image="neutral"
                  camera-controls
                  auto-rotate ar
                  ar-modes="webxr scene-viewer quick-look">

   <!--               <div class="controls">
                    <div>Variant: <select id="variant"></select></div>
                  </div>
                  <div class="controls" ,="" id="color-controls_old">
                  <button class="button btblue" onclick="changemat('Blue')"></button>
                     <button class="button btorange" onclick="changemat('Orange')"></button>
                     <button class="button btdorange" onclick="changemat('Orange Dark')"></button>
                     <button class="button btyellow" onclick="changemat('Yellow')"></button>
                     <button class="button btgreen" onclick="changemat('Green')"></button>
                     <button class="button btgrey" onclick="changemat('Grey')"></button>
                     <button class="button btplastic" onclick="changemat('Plastic')"></button>
                     <button class="button btmetal" onclick="changemat('Metal')"></button>

                    <table>
                    <tr>
                      <th><button class="button btblue" onclick="changemat('Blue')"></button></th>
                      <th><button class="button btorange" onclick="changemat('Orange')"></button></th>
                      <th><button class="button btdorange" onclick="changemat('Orange Dark')"></button></th>
                      <th><button class="button btyellow" onclick="changemat('Yellow')"></button></th>
                      <th><button class="button btgreen" onclick="changemat('Green')"></button></th>
                      <th><button class="button btgrey" onclick="changemat('Grey')"></button></th>
                      <th><button class="button btplastic" onclick="changemat('Plastic')"></button></th>
                      <th><button class="button btmetal" onclick="changemat('Metal')"></button></th>
                    </tr>
                    <tr>
                      <th></th>
                      <th></th>
                      <th></th>
                      <th></th>
                      <th></th>
                      <th></th>
                      <th class="small">PLASTIC</th>
                      <th class="small">METAL</th>
                    </tr>

                  </table>

                  </div> -->





<!--          <div class="menu" id="color-controls"
               onmouseover="keepOn()" onmouseout="resetTime()"
               > -->
    <div class="menu" id="color-controls" >
    <ul class="dropdown">
                <li><a href="#">Cushion</a>
                  <ul>
                    <button class="button btblue" onclick="changemat('Blue')"></button>
                    <button class="button btorange" onclick="changemat('Orange')"></button>
                    <button class="button btdorange" onclick="changemat('Orange Dark')"></button>
                    <button class="button btyellow" onclick="changemat('Yellow')"></button>
                    <button class="button btgreen" onclick="changemat('Green')"></button>
                    <button class="button btgrey" onclick="changemat('Grey')"></button>
                </ul>
              </li>
              <li><a href="#">Base</a>
                  <ul class="base">
                    <button class="button btplastic" onclick="changemat('Plastic')"></button>
                    <button class="button btmetal" onclick="changemat('Metal')"></button>
                </ul>
                </li>
                <li><a href="#">Mesh</a>
                  <ul class="mesh">
                    <button class="button btLM" onclick="changemat('Light Mesh')"></button>
                    <button class="button btGM" onclick="changemat('Grey Mesh')"></button>
                    <button class="button btBM" onclick="changemat('Black Mesh')"></button>
                </ul>
              </li>
             </ul>

  </div>
      <div class="qr" id="qr-image" >
        <img id="myImg"
             src="https://cdn.glitch.com/86f43516-6172-4a58-b9a2-46c74478d5a7%2Fphone-icon.png?v=1626096387731"
             alt="Snow" style="width:20%;max-width:50px;margin-left:10px"><br>
          <small style="font-size: 10px;color: black;text-align: center;">OPEN ON PHONE</small>
      </div>

      <!-- The Modal -->
    <div id="myModal" class="modal">
      <span class="close">&times;</span>
      <img class="modal-content" id="img01">
    </div>



    </model-viewer>


  </div>








  <!-- 游누 Include both scripts below to support all browsers! -->

  <!-- Loads <model-viewer> for modern browsers: -->
  <script type="module"
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>

  <!-- Loads <model-viewer> for old browsers like IE11: -->
  <script nomodule
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js">
  </script>


  <script>
    const modelViewerVariants = document.querySelector("model-viewer#chair");
    const modelViewer = document.querySelector('#chair');
    document.getElementById('color-controls').style.display = 'none';
    document.getElementById('qr-image').style.display = 'none';
    var timer;

    var modal = document.getElementById("myModal");


    // Get the image and insert it inside the modal - use its "alt" text as a caption
    var img = document.getElementById("myImg");
    var modalImg = document.getElementById("img01");
    img.onclick = function(){
    modal.style.display = "block";
    modalImg.src = "https://cdn.glitch.com/86f43516-6172-4a58-b9a2-46c74478d5a7%2Fqr-code.png?v=1626090973247";
  }

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}



/*    const select = document.querySelector('#variant');

      modelViewerVariants.addEventListener('load', () => {
      const names = modelViewerVariants.availableVariants;
      for (const name of names) {
        const option = document.createElement('option');
        option.value = name;
        option.textContent = name;
        select.appendChild(option);

        materials.push(name);

        let btn = document.createElement("button");
        btn.innerHTML = name;
        btn.type = "submit";
        btn.name = "formBtn";
        btn.onclick = function(){
          modelViewerVariants.variantName = name;
        }
        document.body.appendChild(btn);
      }


    });

    select.addEventListener('input', (event) => {
      modelViewerVariants.variantName = event.target.value;
    });                                                          */



    function changemat(name){
      modelViewerVariants.variantName = name;
    }

/*      modelViewer.addEventListener('mousedown', (event) => {
        window.clearTimeout(timer);
        document.getElementById('color-controls').style.display='';

        timer = window.setTimeout(() => {
          document.getElementById('color-controls').style.display = 'none'; }, 4000);
        console.log("ID "+timer);

  }, true);


*/

    function keepOn(){
      window.clearTimeout(timer);
    }

    function resetTime(){
      timer = window.setTimeout(() => {
          document.getElementById('color-controls').style.display = 'none'; }, 4000);
    }

     modelViewerVariants.addEventListener('load', () => {
       document.getElementById('color-controls').style.display = '';
       if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
         //Nothing
       }else{
         document.getElementById('qr-image').style.display = '';
       }

});


  </script>
  </body>
  </html>
